# JFR Shell Demo Script
#
# This shows the basic functionality of the JFR shell.
# Copy and paste these commands into the interactive shell.

# Test basic Groovy functionality
def x = 5 + 3
println "x = $x"

def list = [1, 2, 3, 4, 5]
println "List: $list"
println "Sum: ${list.sum()}"

# Test map operations
def threadStats = [:]
threadStats[42] = 100
threadStats[15] = 75
threadStats[8] = 50
println "Thread stats: $threadStats"

# Sort by value (descending)
def sorted = threadStats.sort { -it.value }
println "Top threads: $sorted"

# Test help system
help

# Test session info (will show no session)
info

# Test available types (will show no session)
types

# When you have a JFR file, you would do:
# open("/path/to/recording.jfr")
# 
# def counts = [:]
# handle(JFRExecutionSample) { event, ctl ->
#   def threadId = event.sampledThread().javaThreadId()
#   counts[threadId] = (counts[threadId] ?: 0) + 1
# }
# 
# run()
# counts.sort { -it.value }.take(5)
# export(counts, "thread-analysis.json")

# Exit the shell
exit