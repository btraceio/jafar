{
  "variants": [
    {
      "id": "baseline",
      "description": "Current production prompt",
      "modifications": {}
    },
    {
      "id": "targeted-examples",
      "description": "Add specific examples for allocation and contention patterns",
      "modifications": {
        "customExamples": "CORRECT EXAMPLES:\n\nQ: \"which threads allocated the most memory?\"\nA: {\"query\": \"events/jdk.ObjectAllocationSample | groupBy(eventThread/javaName, agg=sum, value=bytes) | top(10, by=sum)\", \"explanation\": \"Groups allocation events by thread and sums the bytes allocated\", \"confidence\": 0.95}\n\nQ: \"top allocating classes\"\nA: {\"query\": \"events/jdk.ObjectAllocationSample | groupBy(objectClass/name, agg=sum, value=weight) | top(10, by=sum)\", \"explanation\": \"Groups allocations by class name and sums the allocation weight\", \"confidence\": 0.95}\n\nQ: \"show file reads over 1MB\"\nA: {\"query\": \"events/jdk.FileRead[bytes>1048576]\", \"explanation\": \"Filters file read events to those larger than 1MB\", \"confidence\": 0.98}\n\nQ: \"count GC events\"\nA: {\"query\": \"events/jdk.GarbageCollection | count()\", \"explanation\": \"Counts total garbage collection events\", \"confidence\": 0.98}\n\nQ: \"average GC pause time\"\nA: {\"query\": \"events/jdk.GarbageCollection | stats(duration)\", \"explanation\": \"Calculates statistics for GC pause durations\", \"confidence\": 0.95}\n\nQ: \"top 10 hottest methods\"\nA: {\"query\": \"events/jdk.ExecutionSample/stackTrace/frames/0/method/type/name | groupBy(value) | top(10, by=count)\", \"explanation\": \"Projects to class name from top stack frame, groups by value, shows top 10\", \"confidence\": 0.90}\n\nQ: \"which monitors have the most contention\"\nA: {\"query\": \"events/jdk.JavaMonitorEnter | groupBy(monitorClass/name) | top(10, by=count)\", \"explanation\": \"Groups monitor enter events by monitor class and shows top 10\", \"confidence\": 0.95}\n\nQ: \"top threads by execution samples\"\nA: {\"query\": \"events/jdk.ExecutionSample | groupBy(sampledThread/javaName) | top(10, by=count)\", \"explanation\": \"Groups execution samples by thread name\", \"confidence\": 0.95}\n\nINCORRECT EXAMPLES (DO NOT DO THIS):\n\nQ: \"top allocating classes\"\nWRONG: {\"query\": \"events/jdk.ObjectAllocationSample | groupBy(eventThread/javaClass) | top(10, by=sum)\", ...}\nWHY WRONG: Using eventThread/javaClass instead of objectClass/name - wrong field path for classes\nCORRECT: {\"query\": \"events/jdk.ObjectAllocationSample | groupBy(objectClass/name, agg=sum, value=weight) | top(10, by=sum)\", ...}\n\nQ: \"which monitors have the most contention\"\nWRONG: {\"query\": \"events/jdk.LockContended | groupBy(lockOwner/javaName) | top(10, by=count)\", ...}\nWHY WRONG: Using jdk.LockContended instead of jdk.JavaMonitorEnter - wrong event type\nCORRECT: {\"query\": \"events/jdk.JavaMonitorEnter | groupBy(monitorClass/name) | top(10, by=count)\", ...}\n\nQ: \"top methods\"\nWRONG: {\"query\": \"events/jdk.MethodSample | groupBy(stackTrace/frames[0]/method/name) | select(name) | top(5)\", ...}\nWHY WRONG: (1) jdk.MethodSample doesn't exist (2) frames[0] should be frames/0 (3) select() not supported\nCORRECT: {\"query\": \"events/jdk.ExecutionSample/stackTrace/frames/0/method/type/name | groupBy(value) | top(5, by=count)\", ...}"
      }
    },
    {
      "id": "expanded-examples",
      "description": "Add examples for network I/O, exceptions, class loading, and field precision",
      "modifications": {
        "customExamples": "CORRECT EXAMPLES:\n\nQ: \"top allocating classes\"\nA: {\"query\": \"events/jdk.ObjectAllocationSample | groupBy(objectClass/name, agg=sum, value=weight) | top(10, by=sum)\", \"explanation\": \"Groups allocations by class name and sums weight\", \"confidence\": 0.95}\n\nQ: \"which monitors have the most contention\"\nA: {\"query\": \"events/jdk.JavaMonitorEnter | groupBy(monitorClass/name) | top(10, by=count)\", \"explanation\": \"Groups monitor enter events by monitor class\", \"confidence\": 0.95}\n\nQ: \"show network read events\"\nA: {\"query\": \"events/jdk.SocketRead\", \"explanation\": \"Selects all socket read events\", \"confidence\": 0.98}\n\nQ: \"network reads larger than 1KB\"\nA: {\"query\": \"events/jdk.SocketRead[bytesRead>1024]\", \"explanation\": \"Filters socket reads by bytesRead field\", \"confidence\": 0.95}\n\nQ: \"file writes over 5MB\"\nA: {\"query\": \"events/jdk.FileWrite[bytesWritten>5242880]\", \"explanation\": \"Filters file writes by bytesWritten field\", \"confidence\": 0.95}\n\nQ: \"count exceptions by type\"\nA: {\"query\": \"events/jdk.JavaExceptionThrow | groupBy(thrownClass/name)\", \"explanation\": \"Groups exception throw events by exception class\", \"confidence\": 0.95}\n\nQ: \"which classes took longest to load\"\nA: {\"query\": \"events/jdk.ClassLoad | groupBy(loadedClass/name, agg=max, value=duration) | top(10, by=max)\", \"explanation\": \"Groups class loads by class name with max duration aggregation\", \"confidence\": 0.95}\n\nQ: \"threads with longest park times\"\nA: {\"query\": \"events/jdk.ThreadPark | groupBy(eventThread/javaName, agg=sum, value=duration) | top(10, by=sum)\", \"explanation\": \"Groups thread park events by thread and sums duration\", \"confidence\": 0.95}\n\nQ: \"slow compilations over 1 second\"\nA: {\"query\": \"events/jdk.Compilation[duration>1000000000]\", \"explanation\": \"Filters compilation events longer than 1 second (1 billion nanoseconds)\", \"confidence\": 0.95}\n\nQ: \"statistics on object allocation sizes\"\nA: {\"query\": \"events/jdk.ObjectAllocationSample | stats(weight)\", \"explanation\": \"Computes statistics on allocation weight field\", \"confidence\": 0.95}\n\nQ: \"network traffic by remote address\"\nA: {\"query\": \"events/jdk.SocketRead | groupBy(address, agg=sum, value=bytesRead)\", \"explanation\": \"Groups socket reads by address and sums bytes\", \"confidence\": 0.95}\n\nQ: \"GC events in young generation longer than 50ms\"\nA: {\"query\": \"events/jdk.GarbageCollection[name=~\\\".*Young.*\\\"][duration>50000000]\", \"explanation\": \"Filters GC events with regex name match and duration threshold\", \"confidence\": 0.90}\n\nINCORRECT EXAMPLES (DO NOT DO THIS):\n\nQ: \"show network read events\"\nWRONG: {\"query\": \"events/jdk.FileRead\", ...}\nWHY WRONG: Using jdk.FileRead for network events - should use jdk.SocketRead\nCORRECT: {\"query\": \"events/jdk.SocketRead\", ...}\n\nQ: \"file writes over 5MB\"\nWRONG: {\"query\": \"events/jdk.FileWrite[bytes>5242880]\", ...}\nWHY WRONG: FileWrite uses bytesWritten field, not bytes\nCORRECT: {\"query\": \"events/jdk.FileWrite[bytesWritten>5242880]\", ...}\n\nQ: \"count exceptions by type\"\nWRONG: {\"query\": \"events/jdk.ExceptionStatistics | groupBy(type)\", ...}\nWHY WRONG: Using jdk.ExceptionStatistics instead of jdk.JavaExceptionThrow\nCORRECT: {\"query\": \"events/jdk.JavaExceptionThrow | groupBy(thrownClass/name)\", ...}\n\nQ: \"slow compilations over 1 second\"\nWRONG: {\"query\": \"events/jdk.Compilation | filter(duration>1000000000)\", ...}\nWHY WRONG: Using filter() operator which doesn't exist - use [] for filtering\nCORRECT: {\"query\": \"events/jdk.Compilation[duration>1000000000]\", ...}\n\nQ: \"which classes took longest to load\"\nWRONG: {\"query\": \"events/jdk.ClassLoad | groupBy(className) | stats(duration)\", ...}\nWHY WRONG: Using stats instead of max aggregation + top, and wrong field path\nCORRECT: {\"query\": \"events/jdk.ClassLoad | groupBy(loadedClass/name, agg=max, value=duration) | top(10, by=max)\", ...}\n\nKEY RULES:\n1. Network events use jdk.SocketRead/jdk.SocketWrite with bytesRead/bytesWritten fields\n2. File events use jdk.FileRead/jdk.FileWrite where FileRead uses 'bytes' but FileWrite uses 'bytesWritten'\n3. Exception tracking uses jdk.JavaExceptionThrow with thrownClass/name field\n4. Thread parking uses jdk.ThreadPark (not jdk.JavaThreadPark)\n5. Class loading uses jdk.ClassLoad with loadedClass/name field\n6. Filtering uses [] syntax, never filter() operator\n7. For 'longest' or 'slowest' queries, use agg=max with top(N, by=max)\n8. For direct statistics without grouping, use stats(field) operator\n9. Regex filters use syntax: [field=~\\\"pattern\\\"]\n10. Multiple filters are chained: [filter1][filter2]"
      }
    }
  ]
}
